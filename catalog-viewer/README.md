# OmicIDX Data Catalog Viewer

React-based visualization tool for exploring the OmicIDX data catalog.

## Features

- **Table Browser**: Searchable and filterable list of all tables with metadata
- **Dependency Graph**: Interactive network diagram showing model dependencies
- **Table Details**: Comprehensive view of table schemas, columns, and statistics
- **Column Statistics**: Full DuckDB statistics including min/max, percentiles, null counts

## Setup

1. **Install dependencies**:
   ```bash
   cd catalog-viewer
   npm install
   ```

2. **Generate catalog** (if not already generated):
   ```bash
   # From project root
   uv run oidx catalog generate
   ```

3. **Start development server**:
   ```bash
   npm run dev
   ```

4. **Build for production**:
   ```bash
   npm run build
   ```

## Usage

The catalog viewer expects `catalog.json` to be in the `public/` directory. This file is generated by the catalog generation script.

### Generating the Catalog

```bash
# Using the CLI command
uv run oidx catalog generate

# Or directly
cd sqlmesh
python scripts/generate_catalog.py --output ../catalog-viewer/public/catalog.json
```

## Integration with Astro

This React component is designed to be integrated into an Astro landing page. The main component `CatalogViewer` can be imported and used in an Astro page:

```astro
---
import CatalogViewer from '../catalog-viewer/src/components/CatalogViewer';
---

<CatalogViewer client:load />
```

## Project Structure

```
catalog-viewer/
├── src/
│   ├── components/
│   │   ├── CatalogViewer.tsx    # Main component
│   │   ├── DependencyGraph.tsx   # Graph visualization
│   │   ├── TableBrowser.tsx     # Table list
│   │   ├── TableDetail.tsx      # Table details
│   │   ├── ColumnStats.tsx      # Statistics display
│   │   └── SearchBar.tsx        # Search component
│   ├── hooks/
│   │   ├── useCatalog.ts        # Catalog data loading
│   │   └── useDependencyGraph.ts # Graph data processing
│   ├── types/
│   │   └── catalog.ts           # TypeScript types
│   └── App.tsx
├── public/
│   └── catalog.json              # Generated catalog
└── package.json
```

## Dependencies

- React 18+
- TypeScript
- Vite
- react-force-graph-2d (for dependency graph visualization)

